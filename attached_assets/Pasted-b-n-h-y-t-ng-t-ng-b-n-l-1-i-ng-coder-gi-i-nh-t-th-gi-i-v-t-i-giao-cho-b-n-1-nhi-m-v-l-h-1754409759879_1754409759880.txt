báº¡n hÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n lÃ  1 Ä‘á»™i ngÅ© coder giá»i nháº¥t tháº¿ giá»›i vÃ  tÃ´i giao cho báº¡n 1 nhiá»‡m vá»¥ Ä‘Ã³ lÃ  hÃ£y code bot discord cÃ³ tÃ­nh nÄƒng tu tiÃªn cho tÃ´i,vÃ  tÃ´i khÃ´ng muá»‘n dÃ¹ng mongoDB,Ä‘Ã¢y lÃ  bá»‘ cá»¥c :
tutien-bot/
â”‚
â”œâ”€â”€ commands/  Táº¥t cáº£ lá»‡nh bot (!tuluyen, !dotpha, !nhiemvuâ€¦)
â”‚   â””â”€â”€ admin.js
â”‚   â””â”€â”€ tuluyen.js
â”‚   â””â”€â”€ dotpha.js
â”‚   â””â”€â”€ nhiemvu.js
â”‚   â””â”€â”€ pvp.js
â”‚   â””â”€â”€ boss.js
â”‚   â””â”€â”€ shop.js
â”‚   â””â”€â”€ kho.js
â”‚   â””â”€â”€ item.js
â”‚   â””â”€â”€ bxh.js
â”‚   â””â”€â”€ hotro.js
â”‚   â””â”€â”€ dk.js
â”‚
â”œâ”€â”€ events/
â”‚   â””â”€â”€ ready.js
â”‚   â””â”€â”€ interactionCreate.js
â”‚   â””â”€â”€ messageCreate.js
â”‚
â”œâ”€â”€ models/ vÃ¬ cÃ¡i nÃ y chá»‰ lÃ  dá»¯ liá»‡u tÄ©nh, khÃ´ng cáº§n database.
â”‚   â””â”€â”€ Reamls.js (28 cáº£nh giá»›i mÃ  tÃ´i Ä‘Ã¡ cung cáº¥p cho báº¡n)
â”‚
â”œâ”€â”€ services/ # Logic xá»­ lÃ½ tÃ­nh nÄƒng: tu luyá»‡n, ká»¹ nÄƒng, PVPâ€¦
â”‚   â””â”€â”€ cultivationService.js
â”‚   â””â”€â”€ breakthroughService.js
â”‚   â””â”€â”€ missionService.js
â”‚   â””â”€â”€ pvpService.js
â”‚   â””â”€â”€ bossService.js
â”‚
â”œâ”€â”€ assets/ # HÃ¬nh áº£nh minh há»a ká»¹ nÄƒng, nhÃ¢n váº­t, báº£n Ä‘á»“
â”‚   â””â”€â”€ characters/
â”‚   â””â”€â”€ skills/
â”‚   â””â”€â”€ maps/
â”‚
â”œâ”€â”€ utils/   # HÃ m chung: random, log, format timeâ€¦
â”‚   â””â”€â”€ random.js
â”‚   â””â”€â”€ logger.js
â”‚   â””â”€â”€ time.js
â”‚â”€â”€player.js #nÆ¡i chá»©a duá»¯ lieu ngÆ°á»i dá»«ng
â””â”€â”€ index.js    # Äiá»ƒm khá»Ÿi Ä‘áº§u cá»§a bot
(tÃ´i sáº½ cung cáº¥p cho báº¡n cáº£nh giá»›i :
    { name: "PhÃ m NhÃ¢n", baseExp: 200 },
    { name: "Luyá»‡n Thá»ƒ", baseExp: 400 },
    { name: "Khai Linh", baseExp: 800 },

    { name: "Luyá»‡n KhÃ­", baseExp: 1000 },
    { name: "TrÃºc CÆ¡", baseExp: 3000 },
    { name: "Kim Äan", baseExp: 10000 },
    { name: "NguyÃªn Anh", baseExp: 30000 },
    { name: "HÃ³a Tháº§n", baseExp: 70000 },
    { name: "Luyá»‡n HÆ°", baseExp: 150000 },
    { name: "Há»£p Thá»ƒ", baseExp: 300000 },
    { name: "Äáº¡i Thá»«a", baseExp: 600000 },
    { name: "Äá»™ Kiáº¿p", baseExp: 1000000 },

    { name: "Phi ThÄƒng", baseExp: 2000000 },
    { name: "ChÃ¢n TiÃªn", baseExp: 5000000 },
    { name: "Kim TiÃªn", baseExp: 10000000 },
    { name: "ThÃ¡i áº¤t ChÃ¢n TiÃªn", baseExp: 30000000 },
    { name: "Äáº¡i La Kim TiÃªn", baseExp: 70000000 },

    { name: "TiÃªn VÆ°Æ¡ng", baseExp: 100000000 },
    { name: "TiÃªn Äáº¿", baseExp: 200000000 },
    { name: "BÃ¡n ThÃ¡nh", baseExp: 400000000 },
    { name: "ChÃ¢n ThÃ¡nh", baseExp: 800000000 },
    { name: "ThÃ¡nh VÆ°Æ¡ng", baseExp: 1500000000 },
    { name: "ThÃ¡nh Äáº¿", baseExp: 3000000000 },

    { name: "Äáº¿ QuÃ¢n", baseExp: 5000000000 },
    { name: "TiÃªn Tá»•", baseExp: 8000000000 },
    { name: "Há»—n Äá»™n Cáº£nh", baseExp: 12000000000 },
    { name: "SÃ¡ng Tháº¿ Giáº£", baseExp: 18000000000 },
    { name: "ThiÃªn Äáº¡o", baseExp: 30000000000 }
];
vÃ  á»Ÿ tu luyá»‡n sáº½ lÃ  1 giÃ¢y + 1 exp  trong 30 phÃºt tá»± Ä‘á»™ng dá»±ng vÃ  tá»‘i Ä‘a lÃ  5 láº§n trong 1 ngÃ y )
hÃ£y lÃ m tá»«ng file giÃºp tÃ´i vÃ  code 1 cÃ¡ch hoÃ n háº£o lÃ  tá»‘i thiá»ƒu 100 dÃ²ng code vÃ  tá»‘i Ä‘a 500 dÃ²ng code Ä‘á»‘i vá»›i má»—i file  1 cÃ¡ch hoÃ n háº£o nháº¥t,phá»©c táº¡p nháº¥t,tÃ´i muá»‘n giao diá»‡n Ä‘áº¹p,dá»… tiáº¿p cáº­n ngÆ°á»i chÆ¡i,cÃ³ Ä‘áº§y Ä‘á»§ cÃ¡c nÃºt 
vÃ  lá»‡nh báº¯t Ä‘áº§u báº±ng !
trong Ä‘Ã¢y lÃ  pháº§n cá»§a file ready.js:
module.exports = {
    name: 'ready',
    once: true,

    async execute(client) {
        try {
            // Beautiful ASCII art for Tu TiÃªn Bot
            const asciiArt = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•‘
â•‘   â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â• â•‘
â•‘      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â•‘
â•‘      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â•‘
â•‘      â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•       â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘    â•‘
â•‘      â•šâ•â•    â•šâ•â•â•â•â•â•        â•šâ•â•   â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â•    â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â•    â•šâ•â•    â•‘
â•‘                                                                              â•‘
â•‘                         ğŸŒŸ THÃ€NH CÃ”NG KHá»I Äá»˜NG! ğŸŒŸ                         â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            `;

            console.log('\x1b[36m%s\x1b[0m', asciiArt);

            // Log basic information
            logger.info('ğŸš€ Tu TiÃªn Bot Ä‘Ã£ sáºµn sÃ ng!');
            logger.info(`ğŸ‘¤ ÄÄƒng nháº­p thÃ nh cÃ´ng: ${client.user.tag}`);
            logger.info(`ğŸŒ Káº¿t ná»‘i vá»›i ${client.guilds.cache.size} servers`);
            logger.info(`ğŸ‘¥ Phá»¥c vá»¥ ${client.users.cache.size} ngÆ°á»i dÃ¹ng`);
            logger.info(`ğŸ“¡ Ping: ${client.ws.ping}ms`);

            // Set bot status and activity
            const activities = [
                { name: 'ğŸ§˜â€â™‚ï¸ Tu luyá»‡n cÃ¹ng báº¡n', type: ActivityType.Playing },
                { name: 'âš”ï¸ Äáº¥u trÆ°á»ng PvP', type: ActivityType.Competing },
                { name: 'ğŸ‘¹ ThÃ¡ch Ä‘áº¥u Boss', type: ActivityType.Playing },
                { name: 'ğŸ”ï¸ Chinh phá»¥c cáº£nh giá»›i', type: ActivityType.Playing },
                { name: 'ğŸ“š !hotro Ä‘á»ƒ Ä‘Æ°á»£c trá»£ giÃºp', type: ActivityType.Listening },
                { name: `${client.guilds.cache.size} servers`, type: ActivityType.Watching }
            ];

            let currentActivityIndex = 0;

            // Set initial activity
            await client.user.setActivity(activities[currentActivityIndex].name, { 
                type: activities[currentActivityIndex].type 
            });

            // Rotate activities every 30 seconds
            setInterval(async () => {
                try {
                    currentActivityIndex = (currentActivityIndex + 1) % activities.length;
                    await client.user.setActivity(activities[currentActivityIndex].name, { 
                        type: activities[currentActivityIndex].type 
                    });
                } catch (error) {
                    logger.error('Lá»—i khi thay Ä‘á»•i activity:', error);
                }
            }, 30000);

            // Set bot presence
            await client.user.setPresence({
                status: 'online',
                activities: [{
                    name: activities[0].name,
                    type: activities[0].type
                }]
            });

            // Get and display statistics
            await this.displayBotStatistics(client);

            // Initialize periodic tasks
            await this.initializePeriodicTasks(client);

            // Send startup notification to owners/admin channels
            await this.sendStartupNotification(client);

            // Update database connections and perform maintenance
            await this.performStartupMaintenance(client);

            logger.info('âœ… Táº¥t cáº£ há»‡ thá»‘ng Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi táº¡o thÃ nh cÃ´ng!');
            logger.info('ğŸ® Bot Ä‘ang hoáº¡t Ä‘á»™ng vÃ  sáºµn sÃ ng phá»¥c vá»¥!');

        } catch (error) {
            logger.error('âŒ Lá»—i trong quÃ¡ trÃ¬nh khá»Ÿi Ä‘á»™ng:', error);
        }
    },

    async displayBotStatistics(client) {
        try {
            // Get user statistics from database
            const totalUsers = await User.countDocuments();
            const activeUsers = await User.countDocuments({ 
                lastActive: { $gte: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000) } 
            });
            const newUsersToday = await User.countDocuments({
                createdAt: { $gte: new Date(Date.now() - 24 * 60 * 60 * 1000) }
            });

            // Get cultivation statistics
            const cultivatingUsers = await User.countDocuments({ isCurrentlyCultivating: true });
            
            // Get top realm users
            const topRealmUsers = await User.aggregate([
                { $group: { _id: '$realm', count: { $sum: 1 } } },
                { $sort: { count: -1 } },
                { $limit: 5 }
            ]);

            console.log('\nğŸ“Š === THá»NG KÃŠ BOT ===');
            console.log(`ğŸŒ Servers: ${client.guilds.cache.size}`);
            console.log(`ğŸ‘¥ Tá»•ng Users: ${totalUsers.toLocaleString()}`);
            console.log(`ğŸŸ¢ Active (7 ngÃ y): ${activeUsers.toLocaleString()}`);
            console.log(`ğŸ†• Má»›i hÃ´m nay: ${newUsersToday.toLocaleString()}`);
            console.log(`ğŸ§˜â€â™‚ï¸ Äang tu luyá»‡n: ${cultivatingUsers.toLocaleString()}`);
            
            if (topRealmUsers.length > 0) {
                console.log('\nğŸ”ï¸ Top Cáº£nh Giá»›i:');
                topRealmUsers.forEach((realm, index) => {
                    console.log(`${index + 1}. ${realm._id}: ${realm.count} ngÆ°á»i`);
                });
            }

            console.log('========================\n');

            logger.info(`ğŸ“Š Thá»‘ng kÃª: ${totalUsers} users, ${activeUsers} active, ${cultivatingUsers} Ä‘ang tu luyá»‡n`);

        } catch (error) {
            logger.error('Lá»—i khi láº¥y thá»‘ng kÃª:', error);
        }
    },

    async initializePeriodicTasks(client) {
        try {
            // Log periodic statistics every hour
            setInterval(async () => {
                try {
                    const guilds = client.guilds.cache.size;
                    const users = client.users.cache.size;
                    const cultivating = await User.countDocuments({ isCurrentlyCultivating: true });
                    
                    logger.info(`ğŸ“Š Thá»‘ng kÃª Ä‘á»‹nh ká»³: ${guilds} servers, ${users} users, ${cultivating} Ä‘ang tu luyá»‡n`);
                } catch (error) {
                    logger.error('Lá»—i thá»‘ng kÃª Ä‘á»‹nh ká»³:', error);
                }
            }, 60 * 60 * 1000); // Every hour

            // Clean up inactive cultivation sessions every 5 minutes
            setInterval(async () => {
                try {
                    const expiredSessions = await User.updateMany(
                        { 
                            isCurrentlyCultivating: true,
                            cultivationEndTime: { $lt: new Date() }
                        },
                        { 
                            $set: { isCurrentlyCultivating: false },
                            $unset: { cultivationStartTime: 1, cultivationEndTime: 1 }
                        }
                    );

                    if (expiredSessions.modifiedCount > 0) {
                        logger.info(`ğŸ§¹ Dá»n dáº¹p ${expiredSessions.modifiedCount} phiÃªn tu luyá»‡n Ä‘Ã£ háº¿t háº¡n`);
                    }
                } catch (error) {
                    logger.error('Lá»—i khi dá»n dáº¹p phiÃªn tu luyá»‡n:', error);
                }
            }, 5 * 60 * 1000); // Every 5 minutes

            // Update user activity status
            setInterval(async () => {
                try {
                    const thirtyMinutesAgo = new Date(Date.now() - 30 * 60 * 1000);
                    await User.updateMany(
                        { lastActive: { $lt: thirtyMinutesAgo } },
                        { $set: { isOnline: false } }
                    );
                } catch (error) {
                    logger.error('Lá»—i khi cáº­p nháº­t tráº¡ng thÃ¡i online:', error);
                }
            }, 10 * 60 * 1000); // Every 10 minutes

            logger.info('âš™ï¸ ÄÃ£ khá»Ÿi táº¡o cÃ¡c tÃ¡c vá»¥ Ä‘á»‹nh ká»³');

        } catch (error) {
            logger.error('Lá»—i khi khá»Ÿi táº¡o tÃ¡c vá»¥ Ä‘á»‹nh ká»³:', error);
        }
    },

    async sendStartupNotification(client) {
        try {
            const { config } = require('../index');
            
            // Send notification to bot owners
            for (const ownerId of config.ownerIds) {
                try {
                    const owner = await client.users.fetch(ownerId);
                    
                    const startupEmbed = new EmbedBuilder()
                        .setColor('#00FF00')
                        .setTitle('ğŸš€ Tu TiÃªn Bot - Khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng!')
                        .setDescription('Bot Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng vÃ  sáºµn sÃ ng hoáº¡t Ä‘á»™ng.')
                        .addFields(
                            { name: 'ğŸŒ Servers', value: client.guilds.cache.size.toString(), inline: true },
                            { name: 'ğŸ‘¥ Users', value: client.users.cache.size.toString(), inline: true },
                            { name: 'ğŸ“¡ Ping', value: `${client.ws.ping}ms`, inline: true },
                            { name: 'â° Thá»i gian khá»Ÿi Ä‘á»™ng', value: new Date().toLocaleString('vi-VN'), inline: false }
                        )
                        .setFooter({ text: 'Tu TiÃªn Bot System' })
                        .setTimestamp();

                    await owner.send({ embeds: [startupEmbed] });
                } catch (error) {
                    logger.warn(`KhÃ´ng thá»ƒ gá»­i thÃ´ng bÃ¡o cho owner ${ownerId}:`, error.message);
                }
            }

        } catch (error) {
            logger.error('Lá»—i khi gá»­i thÃ´ng bÃ¡o khá»Ÿi Ä‘á»™ng:', error);
        }
    },

    async performStartupMaintenance(client) {
        try {
            logger.info('ğŸ”§ Báº¯t Ä‘áº§u báº£o trÃ¬ khá»Ÿi Ä‘á»™ng...');

            // Reset any stuck cultivation sessions
            const resetResult = await User.updateMany(
                { 
                    isCurrentlyCultivating: true,
                    $or: [
                        { cultivationEndTime: { $exists: false } },
                        { cultivationEndTime: null },
                        { cultivationEndTime: { $lt: new Date() } }
                    ]
                },
                { 
                    $set: { isCurrentlyCultivating: false },
                    $unset: { cultivationStartTime: 1, cultivationEndTime: 1 }
                }
            );

            if (resetResult.modifiedCount > 0) {
                logger.info(`ğŸ”§ ÄÃ£ reset ${resetResult.modifiedCount} phiÃªn tu luyá»‡n bá»‹ káº¹t`);
            }

            // Update all users' online status to false on startup
            await User.updateMany({}, { $set: { isOnline: false } });

            // Remove any temporary data that shouldn't persist
            await User.updateMany(
                {},
                { 
                    $unset: { 
                        tempData: 1,
                        sessionToken: 1,
                        pendingActions: 1
                    }
                }
            );

            logger.info('âœ… Báº£o trÃ¬ khá»Ÿi Ä‘á»™ng hoÃ n táº¥t');

        } catch (error) {
            logger.error('Lá»—i trong quÃ¡ trÃ¬nh báº£o trÃ¬ khá»Ÿi Ä‘á»™ng:', error);
        }
    }
};
